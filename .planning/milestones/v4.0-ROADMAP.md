# Milestone v4.0: Web Migration

**Status:** ✅ SHIPPED 2026-01-19
**Phases:** 1-3
**Total Plans:** 9

## Overview

Migration from react-native-body-highlighter to react-body-highlighter (web-only). Three phases: foundation/build setup, core migration with full feature parity, and polish/publish. Each phase delivered a verifiable capability.

## Phases

### Phase 1: Foundation + Build System

**Goal**: Project builds and exports a minimal working React component with native SVG

**Depends on**: None (starting point)

**Plans**: 3 plans

Plans:
- [x] 01-01: Build system setup (package.json, tsup, tsconfig)
- [x] 01-02: SVG migration (react-native-svg to native SVG)
- [x] 01-03: Build verification (confirm outputs)

**Requirements:**
- PKG-01: Rename package to react-body-highlighter
- PKG-02: Update package.json for web-only React library
- PKG-03: Remove all React Native dependencies
- PKG-04: tsup bundler with ESM + CJS output
- PKG-05: React 18/19 as peer dependency
- CORE-01: Replace react-native-svg with native browser SVG elements

**Key Accomplishments:**
- Package renamed from react-native-body-highlighter to react-body-highlighter
- All React Native dependencies removed
- tsup bundler configured for ESM + CJS dual output
- TypeScript config updated for React 17+ JSX transform
- Build completes: ESM (143 KB) + CJS (144 KB)

---

### Phase 2: Core Migration

**Goal**: All existing functionality works with the new web-based implementation

**Depends on**: Phase 1 complete

**Plans**: 4 plans

Plans:
- [x] 02-01: Type system and API foundation (types.ts, type exports)
- [x] 02-02: Asset refactoring (bilateral slug split: left-*/right-*)
- [x] 02-03: Component refactoring (simplified API, remove intensity system)
- [x] 02-04: Test migration and verification (web testing library)

**Requirements:**
- CORE-02: Render male body variant (front and back views)
- CORE-03: Render female body variant (front and back views)
- CORE-04: Support per-part color highlighting via data prop
- CORE-05: All bilateral muscles split into left/right
- INTR-01: onClick handler for each body part
- INTR-02: Hover states with cursor pointer
- INTR-03: Support disabling specific body parts
- INTR-04: Support hiding specific body parts
- API-01: Simplified component API
- API-02: Remove exercise-related references
- API-03: Data prop accepts array of { slug, color }
- API-04: Export TypeScript types

**Key Accomplishments:**
- 44 body part slugs with bilateral split (left-*/right-*)
- Body component refactored to use Map-based O(1) color lookup
- Migrated to @testing-library/react with 18 tests
- Full feature parity with v3.x (without React Native)

---

### Phase 3: Polish + Publish

**Goal**: Package is accessible, documented, and published to npm

**Depends on**: Phase 2 complete

**Plans**: 2 plans

Plans:
- [x] 03-01: Accessibility (ARIA labels, keyboard navigation)
- [x] 03-02: Documentation (README rewrite, body parts reference)

**Requirements:**
- A11Y-01: ARIA labels on interactive body parts
- A11Y-02: Role attributes on SVG elements
- DOC-01: Update README with new installation instructions
- DOC-02: Update README with new API examples
- DOC-03: Document all available body part slugs

**Key Accomplishments:**
- Full keyboard navigation (Tab, Enter, Space)
- Screen reader support with readable aria-labels
- README rewritten for v4.0.0 web-only API
- BODY_PARTS.md with all 44 slugs documented

---

## Milestone Summary

**Key Decisions:**

- Web-only (drop React Native) — Simpler codebase, clear target audience
- Inline SVG — No dependencies, native browser support
- Per-part colors — More flexible than intensity system
- Left/right prefixes — Explicit control over bilateral muscles
- Package name: react-body-highlighter — Breaking change, v4.0.0
- ESM-first with type: module — Modern default, CJS fallback
- role="button" for paths — Standard interactive element pattern

**Issues Resolved:**
- Slug categorization corrected for upper-back and lower-back (bilateral, not centerline)
- All React Native dependencies removed successfully
- Test suite migrated to web testing library

**Issues Deferred:**
- CSS transitions for color changes (v2 requirement)
- Full keyboard navigation with arrow keys (v2 requirement)
- SSR/hydration verification (v2 requirement)

**Technical Debt Incurred:**
None — clean implementation

---

_For current project status, see .planning/PROJECT.md_
