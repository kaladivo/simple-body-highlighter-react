---
phase: 03-polish-publish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/index.tsx
  - src/__tests__/Body.test.tsx
autonomous: true

must_haves:
  truths:
    - "Screen reader announces body part names when user navigates to them"
    - "SVG paths are keyboard accessible via Tab navigation"
    - "Enter and Space keys activate body part click handlers"
    - "Disabled parts are announced as disabled and not keyboard focusable"
  artifacts:
    - path: "src/index.tsx"
      provides: "Accessible path elements with ARIA attributes"
      contains: "role=\"button\""
    - path: "src/__tests__/Body.test.tsx"
      provides: "Accessibility tests"
      contains: "aria-label"
  key_links:
    - from: "src/index.tsx"
      to: "onClick callback"
      via: "onKeyDown handler"
      pattern: "onKeyDown.*Enter|Space"
---

<objective>
Add accessibility attributes to interactive body part paths for screen reader and keyboard support.

Purpose: Enable users of assistive technology to navigate and interact with body parts (A11Y-01, A11Y-02)
Output: Accessible SVG paths with ARIA labels, roles, tabindex, and keyboard handlers
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-polish-publish/03-RESEARCH.md

@src/index.tsx
@src/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add accessibility attributes to path elements</name>
  <files>src/index.tsx</files>
  <action>
Modify the path rendering in renderBodySvg (lines 58-70) to add accessibility attributes:

1. Add `role="button"` to make paths announced as interactive elements
2. Add `tabIndex={isDisabled ? -1 : 0}` to enable keyboard focus (disabled parts not focusable)
3. Add `aria-label={part.slug.replace(/-/g, ' ')}` to announce readable part names
4. Add `onKeyDown` handler that triggers onClick on Enter or Space:

```typescript
const handleKeyDown = (
  slug: BodyPartSlug,
  e: React.KeyboardEvent<SVGPathElement>
) => {
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    onClick?.(slug, e as unknown as React.MouseEvent<SVGPathElement>);
  }
};
```

5. The onKeyDown should be conditionally applied like onClick: `onKeyDown={isDisabled ? undefined : (e) => handleKeyDown(part.slug, e)}`

Keep existing attributes (key, d, fill, onClick, style, aria-disabled, data-testid).

Note: The SVG containers (SvgMaleWrapper, SvgFemaleWrapper) already have `role="img"` and `aria-label` which is correct for the container level.
  </action>
  <verify>
Run `npm run typecheck` - no TypeScript errors
Run `npm test` - existing tests pass
  </verify>
  <done>
Path elements have role="button", tabIndex, aria-label, and onKeyDown attributes
  </done>
</task>

<task type="auto">
  <name>Task 2: Add accessibility tests</name>
  <files>src/__tests__/Body.test.tsx</files>
  <action>
Add new tests to verify accessibility attributes:

1. Test that rendered paths have `role="button"`:
```typescript
it('applies role="button" to body parts', () => {
  render(<Body data={[{ slug: 'abs', color: '#ff0000' }]} />);
  const part = screen.getByTestId('abs');
  expect(part).toHaveAttribute('role', 'button');
});
```

2. Test that paths have readable aria-label:
```typescript
it('applies aria-label with readable name', () => {
  render(<Body data={[{ slug: 'left-biceps', color: '#ff0000' }]} />);
  const part = screen.getByTestId('left-biceps');
  expect(part).toHaveAttribute('aria-label', 'left biceps');
});
```

3. Test that non-disabled paths are focusable:
```typescript
it('makes body parts keyboard focusable', () => {
  render(<Body data={[{ slug: 'abs', color: '#ff0000' }]} />);
  const part = screen.getByTestId('abs');
  expect(part).toHaveAttribute('tabIndex', '0');
});
```

4. Test that disabled parts are not focusable:
```typescript
it('excludes disabled parts from tab order', () => {
  render(<Body data={[{ slug: 'abs', color: '#ff0000' }]} disabledParts={['abs']} />);
  const part = screen.getByTestId('abs');
  expect(part).toHaveAttribute('tabIndex', '-1');
});
```

5. Test keyboard activation (Enter key):
```typescript
import { fireEvent } from '@testing-library/react';

it('triggers onClick on Enter key', () => {
  const handleClick = jest.fn();
  render(<Body data={[{ slug: 'abs', color: '#ff0000' }]} onClick={handleClick} />);
  const part = screen.getByTestId('abs');
  fireEvent.keyDown(part, { key: 'Enter' });
  expect(handleClick).toHaveBeenCalledWith('abs', expect.any(Object));
});
```

6. Test keyboard activation (Space key):
```typescript
it('triggers onClick on Space key', () => {
  const handleClick = jest.fn();
  render(<Body data={[{ slug: 'abs', color: '#ff0000' }]} onClick={handleClick} />);
  const part = screen.getByTestId('abs');
  fireEvent.keyDown(part, { key: ' ' });
  expect(handleClick).toHaveBeenCalledWith('abs', expect.any(Object));
});
```
  </action>
  <verify>
Run `npm test` - all tests pass including new accessibility tests
  </verify>
  <done>
6 new tests verify ARIA attributes, tabIndex, and keyboard activation
  </done>
</task>

</tasks>

<verification>
1. `npm run typecheck` passes
2. `npm test` passes with 24+ tests (18 existing + 6 new)
3. Manual verification: Open demo, Tab to body part, press Enter - onClick fires
</verification>

<success_criteria>
1. Screen reader announces body part names when user navigates to them (aria-label with readable names)
2. SVG container has appropriate role attribute (already has role="img" - verified)
3. Body parts are keyboard focusable (tabIndex="0")
4. Enter/Space keys trigger onClick handlers
5. Disabled parts announced as disabled and not in tab order
</success_criteria>

<output>
After completion, create `.planning/phases/03-polish-publish/03-01-SUMMARY.md`
</output>
