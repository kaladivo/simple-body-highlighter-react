---
phase: 02-core-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types.ts
  - src/index.tsx
autonomous: true

must_haves:
  truths:
    - "TypeScript consumers can import BodyPartSlug type"
    - "TypeScript consumers can import BodyPartData type"
    - "TypeScript consumers can import ModelProps type"
    - "Slug type includes all left/right bilateral variants"
  artifacts:
    - path: "src/types.ts"
      provides: "All exported types for the library"
      exports: ["BodyPartSlug", "BodyPartData", "ModelProps"]
    - path: "src/index.tsx"
      provides: "Re-exports types from types.ts"
      contains: "export type"
  key_links:
    - from: "src/index.tsx"
      to: "src/types.ts"
      via: "re-export"
      pattern: "export.*from.*types"
---

<objective>
Create the new simplified type system for react-body-highlighter

Purpose: Establish the foundation for the simplified API by defining all TypeScript types upfront. This enables type-safe development for subsequent plans and allows consumers to import types.

Output: `src/types.ts` with BodyPartSlug (all slugs including left/right variants), BodyPartData, and ModelProps types, re-exported from `src/index.tsx`.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-migration/02-RESEARCH.md
@src/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create types.ts with new type definitions</name>
  <files>src/types.ts</files>
  <action>
Create `src/types.ts` with the following type definitions:

1. **BodyPartSlug** - Union type of all valid body part slugs:

   **Bilateral muscles (19 pairs = 38 slugs):**
   - left-adductors, right-adductors
   - left-ankles, right-ankles
   - left-biceps, right-biceps
   - left-calves, right-calves
   - left-chest, right-chest
   - left-deltoids, right-deltoids
   - left-feet, right-feet
   - left-forearm, right-forearm
   - left-gluteal, right-gluteal
   - left-hamstring, right-hamstring
   - left-hands, right-hands
   - left-knees, right-knees
   - left-lower-back, right-lower-back (bilateral - has path.left/right in bodyBack.ts)
   - left-obliques, right-obliques
   - left-quadriceps, right-quadriceps
   - left-tibialis, right-tibialis
   - left-trapezius, right-trapezius
   - left-triceps, right-triceps
   - left-upper-back, right-upper-back (bilateral - has path.left/right in bodyBack.ts)

   **Centerline muscles (4 slugs):**
   - abs (front view only - combine path.left + path.right into single entry)
   - head (has path.common in both views)
   - hair (has path.common in both views)
   - neck (front view: combine path.common + path.left + path.right; back view: split as bilateral)

   **View-specific bilateral slugs for neck (2 additional):**
   - left-neck, right-neck (back view only - neck has path.left/right in bodyBack.ts)

   **TOTAL: 38 bilateral + 4 centerline + 2 back-view-neck = 44 slugs**

   NOTE: In bodyBack.ts, neck/upper-back/lower-back have separate left/right paths and should be split. In bodyFront.ts, neck has common+left+right that should be combined into single "neck" entry. The slug type must include both "neck" (for front) AND "left-neck"/"right-neck" (for back).

2. **BodyPartData** - Interface for data prop items:
   ```typescript
   interface BodyPartData {
     slug: BodyPartSlug;
     color: string;
   }
   ```
   Both fields required (no optional slug, no intensity).

3. **ModelProps** - Interface for component props:
   ```typescript
   interface ModelProps {
     data: BodyPartData[];
     onClick?: (slug: BodyPartSlug, event: React.MouseEvent<SVGPathElement>) => void;
     gender?: "male" | "female";
     side?: "front" | "back";
     scale?: number;
     border?: string | "none";
     disabledParts?: BodyPartSlug[];
     hiddenParts?: BodyPartSlug[];
     defaultFill?: string;
   }
   ```
   Note: No `colors` array (removed intensity system), no `onBodyPartPress` (renamed to onClick), no `defaultStroke`/`defaultStrokeWidth` (simplification).

Add JSDoc comments for each type explaining usage.
  </action>
  <verify>
Run `npx tsc --noEmit src/types.ts` - should pass with no errors.
Verify file contains all 44 slugs (38 bilateral + 4 centerline + 2 back-neck).
  </verify>
  <done>
src/types.ts exists with BodyPartSlug (44 values), BodyPartData, and ModelProps types. All types have JSDoc comments. TypeScript compiles without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add type re-exports to index.tsx</name>
  <files>src/index.tsx</files>
  <action>
Add type re-exports at the top of `src/index.tsx`:

```typescript
// Export new simplified types
export type { BodyPartSlug, BodyPartData, ModelProps } from './types';
```

Keep the existing old types (Slug, BodyPart, ExtendedBodyPart, BodyProps, BodyPartStyles) exported for now - they will be removed in Plan 03 after the component is refactored.

The goal is to have BOTH old and new types available during the transition, so Plan 02 (assets) and Plan 03 (component) can be developed without breaking the build.
  </action>
  <verify>
Run `npm run build` - should succeed.
Run `grep "export type.*BodyPartSlug" dist/index.d.ts` - should find the export.
Run `grep "export type.*BodyPartData" dist/index.d.ts` - should find the export.
Run `grep "export type.*ModelProps" dist/index.d.ts` - should find the export.
  </verify>
  <done>
index.tsx re-exports BodyPartSlug, BodyPartData, and ModelProps from types.ts. Build succeeds. Types appear in dist/index.d.ts.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. `npm run typecheck` succeeds (or `npx tsc --noEmit`)
3. New types exported in dist/index.d.ts
4. Old types still exported (backward compatibility during migration)
</verification>

<success_criteria>
- src/types.ts exists with all type definitions
- BodyPartSlug contains 44 values (38 bilateral + 4 centerline + 2 back-neck)
- upper-back and lower-back are BILATERAL only (left-upper-back, right-upper-back, left-lower-back, right-lower-back) - NOT centerline
- chest is bilateral (left-chest, right-chest) based on SVG path structure
- neck appears as both centerline "neck" (front view) AND bilateral "left-neck"/"right-neck" (back view)
- BodyPartData requires both slug and color (no optional fields)
- ModelProps uses onClick (not onBodyPartPress)
- All types re-exported from src/index.tsx
- Build produces updated dist/index.d.ts with new types
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-migration/02-01-SUMMARY.md`
</output>
