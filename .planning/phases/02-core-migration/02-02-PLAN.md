---
phase: 02-core-migration
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/assets/bodyFront.ts
  - src/assets/bodyBack.ts
  - src/assets/bodyFemaleFront.ts
  - src/assets/bodyFemaleBack.ts
autonomous: true

must_haves:
  truths:
    - "Each bilateral muscle has separate left-* and right-* entries"
    - "Centerline muscles (abs, head, hair, neck in front view) have single entries"
    - "All path data preserved from original assets"
    - "Assets use new BodyPartSlug type"
  artifacts:
    - path: "src/assets/bodyFront.ts"
      provides: "Male front body parts with split bilateral slugs"
      contains: "left-biceps"
    - path: "src/assets/bodyBack.ts"
      provides: "Male back body parts with split bilateral slugs"
      contains: "left-trapezius"
    - path: "src/assets/bodyFemaleFront.ts"
      provides: "Female front body parts with split bilateral slugs"
      contains: "left-biceps"
    - path: "src/assets/bodyFemaleBack.ts"
      provides: "Female back body parts with split bilateral slugs"
      contains: "left-trapezius"
  key_links:
    - from: "src/assets/bodyFront.ts"
      to: "src/types.ts"
      via: "import type"
      pattern: "import.*BodyPartSlug.*from"
---

<objective>
Refactor all body part assets to use explicit left/right slug prefixes

Purpose: Split bilateral muscles into separate entries with `left-*` and `right-*` prefixes so each body part can be individually addressed. This is the core change enabling explicit per-side highlighting.

Output: Updated asset files where each bilateral muscle (biceps, triceps, chest, etc.) is split into two entries (left-biceps, right-biceps) with their respective path data.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-migration/02-RESEARCH.md
@src/types.ts
@src/assets/bodyFront.ts
@src/assets/bodyBack.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create new asset type and refactor bodyFront.ts</name>
  <files>src/assets/bodyFront.ts</files>
  <action>
Refactor `src/assets/bodyFront.ts` to use the new slug format:

1. Change import to use new type:
```typescript
import { BodyPartSlug } from '../types';

export interface BodyPartAsset {
  slug: BodyPartSlug;
  pathData: string[];
}

export const bodyFront: BodyPartAsset[] = [
  // ... entries
];
```

2. Transform each body part entry:

**For bilateral muscles** (have path.left and path.right):
- Split into TWO separate entries
- Entry 1: `{ slug: "left-{muscle}", pathData: [...path.left] }`
- Entry 2: `{ slug: "right-{muscle}", pathData: [...path.right] }`

**For centerline muscles** (have path.common, or combine left+right for visual symmetry):
- Keep as ONE entry
- Combine all paths: `{ slug: "{muscle}", pathData: [...(path.common || []), ...(path.left || []), ...(path.right || [])] }`

**Bilateral muscles to split (in bodyFront.ts - 15 pairs):**
- chest -> left-chest, right-chest
- obliques -> left-obliques, right-obliques
- biceps -> left-biceps, right-biceps
- triceps -> left-triceps, right-triceps
- deltoids -> left-deltoids, right-deltoids
- adductors -> left-adductors, right-adductors
- quadriceps -> left-quadriceps, right-quadriceps
- knees -> left-knees, right-knees
- tibialis -> left-tibialis, right-tibialis
- calves -> left-calves, right-calves
- forearm -> left-forearm, right-forearm
- hands -> left-hands, right-hands
- ankles -> left-ankles, right-ankles
- feet -> left-feet, right-feet
- trapezius -> left-trapezius, right-trapezius

**Centerline muscles (keep as single entry, combine paths) - 4:**
- abs (has left + right -> combine all into single "abs")
- neck (has common + left + right -> combine all into single "neck")
- head (common only -> single "head")
- hair (common only -> single "hair")

3. Remove the `color` field from entries - it's no longer needed in assets.

**Expected result: 15 bilateral pairs (30 entries) + 4 centerline = 34 entries**
  </action>
  <verify>
Run `npx tsc --noEmit src/assets/bodyFront.ts` - should pass.
Count entries: should have 34 entries (15 bilateral pairs = 30 + 4 centerline).
Verify no path data lost by comparing total path count before/after.
  </verify>
  <done>
bodyFront.ts uses BodyPartAsset type with explicit left/right slugs. All bilateral muscles split. All centerline muscles combined. TypeScript compiles. No path data lost.
  </done>
</task>

<task type="auto">
  <name>Task 2: Refactor bodyBack.ts with same pattern</name>
  <files>src/assets/bodyBack.ts</files>
  <action>
Apply the same transformation to `src/assets/bodyBack.ts`:

1. Update import and type usage (same as bodyFront.ts)

2. **Bilateral muscles to split (in bodyBack.ts - 14 pairs):**
- neck -> left-neck, right-neck (BACK VIEW neck is bilateral - has path.left/right)
- trapezius -> left-trapezius, right-trapezius
- deltoids -> left-deltoids, right-deltoids
- upper-back -> left-upper-back, right-upper-back (has path.left/right)
- triceps -> left-triceps, right-triceps
- lower-back -> left-lower-back, right-lower-back (has path.left/right)
- forearm -> left-forearm, right-forearm
- gluteal -> left-gluteal, right-gluteal
- adductors -> left-adductors, right-adductors
- hamstring -> left-hamstring, right-hamstring
- calves -> left-calves, right-calves
- ankles -> left-ankles, right-ankles
- feet -> left-feet, right-feet
- hands -> left-hands, right-hands

3. **Centerline muscles (keep single) - 2:**
- head (has path.common)
- hair (has path.common)

**IMPORTANT:** In back view, neck/upper-back/lower-back have path.left and path.right arrays (NOT path.common). They are BILATERAL and must be split. This is different from front view where neck is centerline.

**Expected result: 14 bilateral pairs (28 entries) + 2 centerline = 30 entries**
  </action>
  <verify>
Run `npx tsc --noEmit src/assets/bodyBack.ts` - should pass.
Count entries: should have 30 entries (14 bilateral pairs = 28 + 2 centerline).
  </verify>
  <done>
bodyBack.ts refactored with explicit left/right slugs. All path data preserved. TypeScript compiles.
  </done>
</task>

<task type="auto">
  <name>Task 3: Refactor female body assets</name>
  <files>src/assets/bodyFemaleFront.ts, src/assets/bodyFemaleBack.ts</files>
  <action>
Apply the same transformation to female body assets:

1. `src/assets/bodyFemaleFront.ts`:
   - Same pattern as bodyFront.ts
   - Split bilateral muscles with left/right paths
   - Combine centerline muscles
   - Expected: similar entry count to bodyFront.ts (~34)

2. `src/assets/bodyFemaleBack.ts`:
   - Same pattern as bodyBack.ts
   - Split bilateral muscles with left/right paths (including neck, upper-back, lower-back)
   - Combine centerline muscles (head, hair)
   - Expected: similar entry count to bodyBack.ts (~30)

Both files should:
- Import BodyPartSlug from '../types'
- Use BodyPartAsset interface
- Have slug: BodyPartSlug (with left-*/right-* prefixes)
- Have pathData: string[] (array of SVG path d attributes)
- Remove the color field
  </action>
  <verify>
Run `npx tsc --noEmit src/assets/bodyFemaleFront.ts` - should pass.
Run `npx tsc --noEmit src/assets/bodyFemaleBack.ts` - should pass.
Run `npm run typecheck` - entire project should pass.
  </verify>
  <done>
All four asset files refactored. Female front and back use BodyPartAsset type with explicit left/right slugs. TypeScript compiles for all files.
  </done>
</task>

</tasks>

<verification>
1. `npm run typecheck` succeeds
2. All four asset files import from '../types'
3. All bilateral muscles have separate left-* and right-* entries
4. Total path count unchanged (no data loss)
5. No `color` field in asset entries
6. bodyFront.ts: ~34 entries (30 bilateral + 4 centerline)
7. bodyBack.ts: ~30 entries (28 bilateral + 2 centerline)
</verification>

<success_criteria>
- All 4 asset files use BodyPartAsset type
- Bilateral muscles split into left-*/right-* entries
- Centerline muscles remain single entries
- In bodyBack.ts: neck, upper-back, lower-back are BILATERAL (split into left-*/right-*)
- In bodyFront.ts: neck is CENTERLINE (combined into single "neck")
- All SVG path data preserved (no loss)
- TypeScript compilation succeeds
- Assets import BodyPartSlug from types.ts
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-migration/02-02-SUMMARY.md`
</output>
