---
phase: 02-remote-docs-cicd
plan: 02
type: execute
wave: 2
depends_on: [02-01]
files_modified: []
autonomous: false
user_setup:
  - service: github
    why: "Repository creation and push"
    account_required: true
    action: "Authenticate gh CLI if not already logged in"
  - service: npm
    why: "Package publishing"
    env_vars:
      - name: NPM_TOKEN
        source: "npmjs.com > Settings > Access Tokens > Generate New Token (Granular)"
    dashboard_config:
      - task: "Create granular access token with read/write permissions for simple-body-highlighter-react"
        location: "https://npmjs.com/settings/~/tokens"
      - task: "Add NPM_TOKEN secret to repository"
        location: "https://github.com/kaladivo/simple-body-highlighter-react/settings/secrets/actions"

must_haves:
  truths:
    - "Git origin points to kaladivo/simple-body-highlighter-react"
    - "Codebase is pushed to new GitHub remote"
    - "v1.0.0 tag triggers publish workflow"
    - "Package is published to npm registry"
  artifacts:
    - path: "remote:origin"
      provides: "New GitHub repository"
      contains: "kaladivo/simple-body-highlighter-react"
  key_links:
    - from: "git tag v1.0.0"
      to: "GitHub Actions workflow"
      via: "tag push trigger"
      pattern: "on: push: tags: - 'v*'"
    - from: "GitHub Actions workflow"
      to: "npm registry"
      via: "npm publish with NPM_TOKEN"
      pattern: "npm publish"
---

<objective>
Create new GitHub remote, push codebase, and verify publish workflow triggers correctly.

Purpose: Establish the new repository and verify the full publish pipeline works end-to-end.
Output: Live repository at github.com/kaladivo/simple-body-highlighter-react with working CI/CD.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-remote-docs-cicd/02-RESEARCH.md
@.planning/phases/02-remote-docs-cicd/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GitHub repository and push codebase</name>
  <files></files>
  <action>
1. Check gh CLI authentication status: `gh auth status`
   - If not authenticated, the command will fail and user must run `gh auth login`

2. Check if repository already exists:
   ```bash
   gh repo view kaladivo/simple-body-highlighter-react 2>/dev/null && echo "EXISTS" || echo "NEW"
   ```

3. If NEW: Create repository and push in one command:
   ```bash
   gh repo create kaladivo/simple-body-highlighter-react --public --source=. --remote=origin --push
   ```

   This command:
   - Creates public repository on GitHub
   - Sets origin remote to new repo (overwrites existing)
   - Pushes all branches and tags

4. If EXISTS: Update remote and push:
   ```bash
   git remote set-url origin git@github.com:kaladivo/simple-body-highlighter-react.git
   git push -u origin main --force
   git push --tags
   ```

5. Verify remote is correct: `git remote -v`
  </action>
  <verify>
`git remote -v` shows:
```
origin  git@github.com:kaladivo/simple-body-highlighter-react.git (fetch)
origin  git@github.com:kaladivo/simple-body-highlighter-react.git (push)
```
  </verify>
  <done>
Origin remote points to kaladivo/simple-body-highlighter-react and codebase is pushed.
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Set up NPM_TOKEN secret in GitHub</name>
  <action>User must create npm token and add as GitHub secret.</action>
  <instructions>
Before we can test the publish workflow, you need to set up the NPM_TOKEN:

**Step 1: Create npm granular access token**
1. Go to https://npmjs.com/settings/~/tokens
2. Click "Generate New Token" > "Granular Access Token"
3. Set token name: `github-actions-publish`
4. Set expiration: 90 days
5. Permissions: "Read and write"
6. Packages: "Only select packages" > "simple-body-highlighter-react" (or All packages if package doesn't exist yet)
7. Click "Generate Token"
8. **Copy the token** (shown only once!)

**Step 2: Add as GitHub secret**
1. Go to https://github.com/kaladivo/simple-body-highlighter-react/settings/secrets/actions
2. Click "New repository secret"
3. Name: `NPM_TOKEN`
4. Value: (paste the token from step 1)
5. Click "Add secret"

Type "done" when NPM_TOKEN secret is configured.
  </instructions>
  <resume-signal>Type "done" when NPM_TOKEN is configured as GitHub secret</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Create and push v1.0.0 tag to trigger publish</name>
  <files></files>
  <action>
1. Check if v1.0.0 tag already exists locally:
   ```bash
   git tag -l "v1.0.0"
   ```

2. If tag doesn't exist, create it:
   ```bash
   git tag v1.0.0
   ```

3. Push the tag to trigger the workflow:
   ```bash
   git push origin v1.0.0
   ```

4. Output the Actions URL for user to verify:
   ```bash
   echo "Verify workflow at: https://github.com/kaladivo/simple-body-highlighter-react/actions"
   ```
  </action>
  <verify>
`git tag -l "v1.0.0"` returns "v1.0.0"
Tag is pushed (command succeeds without "already exists on remote" error)
  </verify>
  <done>
v1.0.0 tag exists and is pushed to GitHub, triggering the publish workflow.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 4: Verify publish workflow completed successfully</name>
  <what-built>
Complete publish pipeline:
- GitHub repository at kaladivo/simple-body-highlighter-react
- GitHub Actions workflow triggered by v1.0.0 tag
- Package published to npm registry
  </what-built>
  <how-to-verify>
1. Visit https://github.com/kaladivo/simple-body-highlighter-react/actions
2. Find the workflow run triggered by v1.0.0 tag
3. Verify all steps passed (green checkmarks):
   - Checkout
   - Setup Node.js
   - Install dependencies
   - Run tests
   - Type check
   - Build package
   - Publish to npm

4. Verify package on npm:
   - Visit https://www.npmjs.com/package/simple-body-highlighter-react
   - Confirm version 1.0.0 is published
   - Test installation: `npm info simple-body-highlighter-react`

If workflow failed, check the error logs and report the issue.
  </how-to-verify>
  <resume-signal>Type "published" if package is live on npm, or describe any issues encountered</resume-signal>
</task>

</tasks>

<verification>
- [ ] `git remote -v` shows origin pointing to kaladivo/simple-body-highlighter-react
- [ ] GitHub repository exists and is accessible
- [ ] NPM_TOKEN secret is configured in repository
- [ ] v1.0.0 tag exists and is pushed
- [ ] GitHub Actions workflow triggered and completed
- [ ] Package is visible on npmjs.com
</verification>

<success_criteria>
1. `git remote -v` shows origin pointing to kaladivo/simple-body-highlighter-react
2. Repository is public and accessible at github.com/kaladivo/simple-body-highlighter-react
3. Pushing v1.0.0 tag triggers the publish workflow
4. Workflow completes successfully (all steps green)
5. Package simple-body-highlighter-react@1.0.0 is published to npm
</success_criteria>

<output>
After completion, create `.planning/phases/02-remote-docs-cicd/02-02-SUMMARY.md`
</output>
